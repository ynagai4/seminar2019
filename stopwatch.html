<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        var time = 0;
        var timer;
        var state = 0; // 0は停止中，1は動作中
        var rap = 0;
        var rap_begin = 0;
        var rap_finish = 0;

        function a_button_pressed() {
            if (state == 0) {
                start();
                state = 1;
            } else {
                stop();
                state = 0;
            }
        }

        function b_button_pressed() {
            if (state == 0) {
                clear();

            } else {
                rap_finish = time;
                rap = rap_finish - rap_begin;
                rap_begin = time;
                document.getElementById("rap").innerHTML = rap;
            }

        }

        function clear() {
            time = 0;
            document.getElementById("time-count").innerHTML = time;
        }

        function tick() {
            time += 1;
            document.getElementById("time-count").innerHTML = time;
        }

        function start() {
            timer = setInterval(tick, 1000);
        }
        function stop() {
            clearInterval(timer);
        }

    </script>
    <style type="text/css">
        div#x {
            border: 1px solid;
            padding: 10px;
            height: 150px;
            width: 150px;
        }

        p#time-count {
            text-align: right;
        }

        div#buttons {
            text-align: center;
        }
    </style>
</head>

<body>
    <div id="x">
        <p id="time-count">0</p>
        <p id="rap">0</p>
        <div id="buttons">
            <button onclick="a_button_pressed()">A</button>
            <button onclick="b_button_pressed()">B</button>
        </div>
    </div>
</body>

</html>